
# pthread를 이용하여 교차로에서 차량 진입 문제 해결 프로그램 구현하기 


 * Pthread 실습을 위해 컴퓨터학부 학사과정중 주어진 과제를 재구현 해보았다.



차   례

1장	프로젝트 동기/목적 
 
2장	설계/구현 
 	
3장	수행결과(구현 화면 포함)

4장	결론 및 보충할 것

--------------------------------------------

문제를 이해하기 위해 처음 사용했던 방법은 waiting / passed / using 으로 나누는 것이였다. passed 와 using 은 점거중임을 나타내고 waiting은 대기중은 차량들의 집합을 나타내고자 했다. 지나가기 위해 2초가 필요하기 때문에 차량이 출발하면 using으로 이동하고 tick 마다 passed 로 using을 옮긴다. 차량의 출발을 정하는 것은 현재 점거중인 passed 와 using을 보면 되는 것이다.
 
 이런 식으로 구현했을 때의 문제는 제일 먼저 waiting table 관리가 어려웠다 새로운 값이 tick 마다 들어왔을 때 array에 추가하려고 하니 링크드 리스트 형태로 구현해보려고 했고 이를 랜덤으로 뽑는 과정이 너무 복잡해 졌다. 

 그래서 waiting 배열을 각 index 는 차로를 가리키고 값이 곧 대기중인 차량의 숫자를 나타내도록 했다. 이렇게 구현함으로써 using을 굳이 확인 할 필요 없었고 using을 확인 하지않고 반대편 (1 -> 3 , 2 -> 4)에 대기중이 차량이 0이 아닌지만 파악하면 되었고 이를 통해 using 변수를 제거하고 waiting 배열과 passed 만을 가지고 구현할 수 있었다.

각 조건 변수들을 모든 스레드에 하나씩 부여하도록 함으로써 특정 스레드를 찾아서 일을 배정 할 수 있었는데 메모리적인 관점에서 봤을 때 모든 스레드에 각기 다른 함수를 배정하고 mutex , cond를 부여한다는 것은 매우 비효율적일 것이라고 예측 했다. 

 함수를 하나로 압축하고 해당 함수에 조건문을 추가하는 것이 메모리 적인 관점에서는 조금더 효율적이 아닐까 싶다. 
